generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model sessions {
  id            String  @id(map: "sessions_pk") @default(uuid()) @db.Uuid
  user_id       Int
  name          String  @default(dbgenerated("now()")) @db.VarChar(32)
  order         Int     @default(0) @db.SmallInt
  scramble_type String  @default("333") @db.VarChar(16)
  updated       BigInt  @default(dbgenerated("EXTRACT(EPOCH FROM NOW())::bigint")) @db.BigInt
  times         times[]
}

model times {
  id         String   @id(map: "times_pk") @default(uuid()) @db.Uuid
  session_id String   @default(uuid()) @db.Uuid
  time       Int
  penalty    Int      @default(0) @db.SmallInt
  scramble   String?
  comment    String?  @db.VarChar(512)
  timestamp  BigInt?  @default(dbgenerated("EXTRACT(EPOCH FROM NOW())::bigint")) @db.BigInt
  updated    BigInt   @default(dbgenerated("EXTRACT(EPOCH FROM NOW())::bigint")) @db.BigInt
  archived   Boolean  @default(false)
  sessions   sessions @relation(fields: [session_id], references: [id], onDelete: Cascade, map: "times_sessions_fk")
}
